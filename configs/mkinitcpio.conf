# mkinitcpio configuration for archstrap
# This configuration is used for UKI generation with Plymouth and LUKS2

MODULES=(btrfs)

BINARIES=()

FILES=()

# Hooks for systemd-based initramfs with Plymouth and LUKS2 encryption
# Order matters!
#
# systemd       - Use systemd in initramfs (replaces base, udev)
# autodetect    - Detect necessary modules for this hardware
# microcode     - Load CPU microcode early
# modconf       - Load module configuration from /etc/modprobe.d
# kms           - Kernel Mode Setting early for Plymouth
# keyboard      - Keyboard support for passphrase entry
# sd-vconsole   - Virtual console font/keymap (systemd version)
# plymouth      - Boot splash with LUKS passphrase prompt
# sd-encrypt    - LUKS2 decryption (systemd version, supports TPM2)
# block         - Block device support
# filesystems   - Filesystem support
# fsck          - Filesystem check

HOOKS=(systemd autodetect microcode modconf kms keyboard sd-vconsole plymouth sd-encrypt block filesystems fsck)

# Compression
COMPRESSION="zstd"
COMPRESSION_OPTIONS=(-3)
